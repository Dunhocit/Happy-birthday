<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css" />

        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
            integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <title>Happy birthday</title>
    </head>
    <body>
        <div class="container">
            <div class="boxcontainer">
                <div class="image">
                    <img src="flag.png" alt="" />
                </div>
                <div class="text-happybirthday">
                    <img src="texthappy.png" alt="" />
                </div>
                <div class="cake">
                    <img src="cake.png" alt="" />
                </div>
                <div class="box-balloon">
                    <div class="balloon-item1">
                        <img src="balloon.png" alt="" />
                    </div>
                    <div class="balloon-item1">
                        <img src="balloon.png" alt="" />
                    </div>
                </div>
                <div class="box-cloud">
                    <div class="cloud">
                        <img src="cloud.png" alt="" />
                    </div>
                    <div class="cloud">
                        <img src="cloud.png" alt="" />
                    </div>
                </div>
                <div class="box-firework">
                    <div class="firework">
                        <img src="firework.png" alt="" />
                        <img src="firework1.png" alt="" id="firework1" />
                    </div>
                    <div class="firework">
                        <img src="firework.png" alt="" />
                        <img src="firework1.png" alt="" id="firework1" />
                    </div>
                </div>
                <div class="paperCannons">
                    <img src="paperCannons1.png" alt="" />
                </div>
                <div class="box-giftbox">
                    <img src="giftbox.png" alt="" />
                    <img src="giftbox.png" alt="" />
                    <img src="giftbox.png" alt="" />
                    <img src="giftbox.png" alt="" />
                    <img src="giftbox.png" alt="" />
                    <img src="giftbox.png" alt="" />
                </div>
                <div class="mail">
                    <i class="fa-regular fa-envelope"></i>
                </div>
                <div class="boxcute">
                    <div class="cute1">
                        <img src="cute.png" alt="" />
                    </div>
                    <div class="cute2">
                        <img src="cute.png" alt="" />
                    </div>
                </div>
            </div>
            <div class="boxMail">
                <i class="fa-solid fa-xmark"></i>
                <div class="boxMail-container">
                    <div class="card1">
                        <div class="userImg">
                            <img src="Picture3.jpg" alt="" />
                        </div>
                        <h3>Happy birthday</h3>
                        <div class="imageCute">
                            <img src="cute1.png" alt="" />
                        </div>
                    </div>
                    <div class="card2">
                        <div class="card2-content">
                            <h3>Gửi b Thùy!</h3>
                            <h2>
                                Hôm nay là một ngày đặc biệt đối với một người đặc biệt nì. Chúc
                                b có một ngày sinh nhật thật ý nghĩa, vui vẻ vẻ, hạnh phúc bên
                                gia đình và bạn bè. Chúc b sang tuổi mới lun lun vui vẻ, phải
                                lun lun vui tươi không cần tưới nháaaaa hahah, ngày càng xưn đẹp
                                hơn những năm khác nì gấp mũ n lần lun cho ae cây xoài hahaha ,
                                học giỏi nì nhưng mà học vẫn phải chú ý giữ gìn sức khỏe b nhé
                                và đặc bịt sớm có bồ như b mong muốn nháaaaa:3 .                                Chúc bạn tất cả những điều tốt đẹp nhấtttttt nhéeeeeeee hihi^^
                            </h2>

                            <div class="diary-gallery">
                                <h3>Nhật ký kỷ niệm của chúng ta</h3>
                                <div class="gallery-grid">
                                    <img src="anh1.jpg" alt="Kỷ niệm 1">
                                    <img src="anh2.jpg" alt="Kỷ niệm 2">
                                    <img src="anh3.jpg" alt="Kỷ niệm 3">
                                    <img src="anh4.jpg" alt="Kỷ niệm 4">
                                    <img src="anh5.jpg" alt="Kỷ niệm 5">
                                    <img src="anh6.jpg" alt="Kỷ niệm 6">
                                    <img src="anh7.jpg" alt="Kỷ niệm 7">
                                </div>
                            </div>
                            <div class="imageCute2">
                                <img src="cute2.png" alt="" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audio background: đặt phonecert.mp3 cùng thư mục với index1.html -->
        <audio id="bg-audio" src="phonecert.mp3" autoplay loop preload="auto"></audio>
    </body>
    <script>
        // mouse hearts
        document.addEventListener('mousemove', function (e) {
            let body = document.querySelector('body');
            let heart = document.createElement('span');
            let x = e.offsetX;
            let y = e.offsetY;
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';

            let size = Math.random() * 10;
            heart.style.width = 4 * size + 'px';
            heart.style.height = 4 * size + 'px';

            let transformValue = Math.random() * 360;
            heart.style.transform = 'rotate(' + transformValue + 'deg)';

            body.appendChild(heart);

            setTimeout(function () {
                heart.remove();
            }, 1000);
        });

        // mail modal open/close
        let mailBox = document.querySelector('.mail');
        let boxmail = document.querySelector('.boxMail');
        var close = document.querySelector('.fa-xmark');
        mailBox.onclick = function () {
            mailBox.classList.toggle('active');
            boxmail.classList.add('active');
        };

        close.addEventListener('click', function () {
            boxmail.classList.remove('active');
        });

        // Audio autoplay fallback: nhiều trình duyệt chặn autoplay có âm thanh.
        // Đoạn này cố gắng phát ngay; nếu bị chặn, lắng nghe tương tác của người dùng để bật nhạc.
        (function setupAudioAutoplayFallback() {
            const audio = document.getElementById('bg-audio');
            if (!audio) return;

            const tryPlay = () => {
                audio.play().catch(() => {
                    // nếu bị chặn, chờ 1 lần tương tác của người dùng để phát
                    const wake = () => {
                        audio.play().catch(() => {
                            /* nếu vẫn bị chặn thì không làm gì thêm */
                        });
                        document.removeEventListener('click', wake);
                        document.removeEventListener('keydown', wake);
                        document.removeEventListener('touchstart', wake);
                    };
                    document.addEventListener('click', wake, { once: true });
                    document.addEventListener('keydown', wake, { once: true });
                    document.addEventListener('touchstart', wake, { once: true });
                });
            };

            // Thử phát ngay
            tryPlay();

            // Tùy chọn: hiển thị control khi autoplay thất bại không mong muốn
            // (bỏ comment dòng dưới nếu muốn người dùng thấy control để bật/tắt)
            // audio.controls = true;
        })();
    </script>
</html>
